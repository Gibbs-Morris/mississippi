---
description: Build Rules and Quality Gates
alwaysApply: true
---
# Build Rules and Quality Gates
**Source:** .github/instructions/build-rules.instructions.md


# Build Rules and Quality Gates

Governing thought: Every change ships only after a clean build, cleanup, tests, and mutation tests (where required) with zero warnings.

> Drift check: Verify commands in `eng/src/agent-scripts/` (or `./go.ps1`) before use; scripts are the source of truth for switches and order.

## Rules (RFC 2119)

- Builds **MUST** finish with zero compiler/analyzer warnings; agents **MUST NOT** add `NoWarn`, relax severity, or suppress rules without explicit approval. Why: Zero-warnings is a hard gate.
- Agents **MUST** run and pass build, cleanup, unit tests, and mutation tests (for Mississippi projects) before calling work complete. Why: Full quality pipeline prevents regressions.
- Agents **MUST NOT** add `[SuppressMessage]` or `#pragma warning disable` except for explicitly approved, minimal scopes. Why: Suppressions hide defects.
- Agents **MUST** keep StyleCop/ReSharper cleanup clean. Why: Consistent formatting enables readable diffs.
- Mississippi code changes **MUST** add comprehensive tests; Samples changes **SHOULD** add minimal illustrative tests. Why: Maintains coverage expectations per solution type.
- Mississippi mutation tests **MUST** be allowed to run to completion (plan for ~30 minutes) and **MUST** not be cancelled early. Why: Mutation score enforces assertion quality.
- Package versions **MUST** remain in `Directory.Packages.props`; project files **MUST NOT** add `Version` attributes. Why: Central Package Management avoids drift.

## Scope and Audience

All contributors changing Mississippi or Samples solutions.

## At-a-Glance Quick-Start

- Build and cleanup (Mississippi):  
  `pwsh ./eng/src/agent-scripts/build-mississippi-solution.ps1`  
  `pwsh ./eng/src/agent-scripts/clean-up-mississippi-solution.ps1`
- Tests (Mississippi): `pwsh ./eng/src/agent-scripts/unit-test-mississippi-solution.ps1`
- Mutation (Mississippi): `pwsh ./eng/src/agent-scripts/mutation-test-mississippi-solution.ps1` (wait for completion)
- Samples equivalents: `build-sample-solution.ps1`, `clean-up-sample-solution.ps1`, `unit-test-sample-solution.ps1`
- Final gate both solutions: `pwsh ./go.ps1`

## Core Principles

- Zero warnings always; fix code rather than suppressing.
- Two solutions: Mississippi (full tests + mutation) vs Samples (minimal illustrative tests, no mutation gate).
- Use repository scripts for consistent parameters, coverage, mutation reporting, and cleanup.
- Tests accompany behavior changes; mutation keeps assertions strong.

## Procedures

1. Build in Release and fix warnings until clean.
2. Run cleanup script; resolve any reported issues.
3. Add/update tests (comprehensive for Mississippi, minimal for Samples).
4. Run unit tests; for Mississippi, run mutation tests and wait for completion.
5. Re-run build/tests if code changed; finish with `pwsh ./go.ps1` before handoff.

## References

- Shared guardrails: `.github/instructions/shared-policies.instructions.md`
- Testing/mutation details: `.github/instructions/testing.instructions.md`
