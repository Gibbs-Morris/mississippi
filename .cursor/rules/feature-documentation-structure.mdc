---
description: Feature Documentation Structure
globs: ["docs/**/*.md"]
alwaysApply: false
---
# Feature Documentation Structure
**Source:** .github/instructions/feature-documentation-structure.instructions.md


# Feature Documentation Structure

Governing thought: Every Mississippi feature follows a predictable documentation structure with strict content segregation—readers always know where to find what they need.

> Drift check: This file defines the standard feature folder structure for `docs/Docusaurus/`; update as documentation patterns evolve.

## Rules (RFC 2119)

### Structure Rules

- Each feature **MUST** have an entry page named `{feature}.md` that serves as both introduction and getting started. Why: Single entry point per Docusaurus best practices.
- The entry page **MUST** be referenced in `_category_.json` via the `link.id` property. Why: Makes the folder clickable in the sidebar.
- Optional pages **MUST** only be created when there is substantial content for that page type. Why: Avoids empty or stub pages.
- Features **MUST NOT** have more than two levels of nesting (area → feature → page). Why: Deep hierarchies obscure navigation.

### Content Segregation Rules (Non-Negotiable)

- Content **MUST** appear only on the page type designated for it; mixing content across page types is prohibited. Why: Readers must find all related content in one place.
- Testing guidance (mocks, test utilities, test setup) **MUST** appear only on `testing.md`. Why: Developers looking for testing help check one page.
- Configuration options **MUST** appear only on `configuration.md` (or entry page if no dedicated config page exists). Why: All settings in one place.
- API reference tables **MUST** appear only on `public-apis.md` (or entry page if no dedicated API page exists). Why: Reference material stays together.
- Internal implementation details **MUST** appear only on `internals.md`. Why: Separates DX from contributor content.
- Best practices and anti-patterns **MUST** appear only on `best-practices.md`. Why: Pattern guidance stays consolidated.
- Migration guides **MUST** appear only in the `migration/` subfolder. Why: Version-specific content is isolated.
- Sample project links and extended examples **MUST** appear only on `samples.md` (brief inline examples in other pages are permitted). Why: Comprehensive examples are discoverable.

### Naming Rules

- Area folders **MUST** use kebab-case matching the product area (e.g., `event-sourcing`, `client-state-management`). Why: Consistent URLs.
- Feature folders **MUST** use kebab-case matching the feature name (e.g., `brooks`, `aggregates`, `sagas`). Why: Matches sidebar labels.
- Page files **MUST** use the canonical names defined in the Standard Page Types table below. Why: Predictable file names across features.
- `_category_.json` files **MUST** exist in every feature folder. Why: Controls sidebar rendering.

## Scope and Audience

All contributors writing or updating feature documentation in `docs/Docusaurus/`.

## Hierarchy

```
docs/
└── {area}/                        # e.g., event-sourcing, client-state-management
    ├── _category_.json
    └── {feature}/                 # e.g., brooks, aggregates, sagas
        ├── _category_.json
        ├── {feature}.md           # REQUIRED: Entry page (intro + getting started)
        ├── {topic}.md             # OPTIONAL: DX-focused topic pages
        ├── configuration.md       # OPTIONAL: Options, settings, environment setup
        ├── testing.md             # OPTIONAL: Mocks, test utilities, test patterns
        ├── samples.md             # OPTIONAL: Sample project links, extended examples
        ├── public-apis.md         # OPTIONAL: API reference tables, contracts
        ├── best-practices.md      # OPTIONAL: Performance, patterns, anti-patterns
        ├── troubleshooting.md     # OPTIONAL: Common errors, debugging, FAQ
        ├── internals.md           # OPTIONAL: Architecture, algorithms, design rationale
        └── migration/             # OPTIONAL: Breaking change guides (subfolder)
            └── v{X}-to-v{Y}.md
```

## Standard Page Types

| Page | Filename | Sidebar Position | Focus | Required |
|------|----------|------------------|-------|----------|
| **Entry** | `{feature}.md` | 1 | Introduction, key concepts, getting started, "Learn More" links | Yes |
| **Topic** | `{topic}.md` | 2–9 | Deep dive on specific capability (DX-focused) | As needed |
| **Configuration** | `configuration.md` | 10 | All options, defaults, environment-specific setup | When configurable |
| **Testing** | `testing.md` | 11 | Mocking, test utilities, test patterns, `EventSourcing.Testing` usage | When testing support exists |
| **Samples** | `samples.md` | 12 | Links to `/samples` projects, extended code walkthroughs | When samples exist |
| **Public APIs** | `public-apis.md` | 13 | Interface tables, contract reference, extension points | When rich API surface |
| **Best Practices** | `best-practices.md` | 14 | Performance tips, recommended patterns, anti-patterns | When complex |
| **Troubleshooting** | `troubleshooting.md` | 15 | Common errors, debugging tips, FAQ | When common issues exist |
| **Internals** | `internals.md` | 16 | Architecture diagrams, algorithms, design rationale | When complex internals |
| **Migration** | `migration/v{X}-to-v{Y}.md` | 17+ | Breaking change guides, upgrade paths | When breaking changes ship |

## Entry Page Template

Every feature entry page **MUST** follow this structure:

```markdown
---
id: {feature}
title: {Feature Title}
sidebar_label: {Feature}
sidebar_position: 1
description: One-sentence summary of the feature.
---

# {Feature Title}

## Overview

What is this feature and why use it. State the page focus (Public API / DX).

## Key Concepts

| Concept | Description |
|---------|-------------|
| **Term** | Definition |

## Architecture

```mermaid
flowchart LR
    A[Input] --> B[Process] --> C[Output]
```

## Getting Started

### Step 1: Install

### Step 2: Configure

### Step 3: Use

## Learn More

- [Topic Page](./topic.md) - Description
- [Configuration](./configuration.md) - Description
```

## Category JSON Template

Every feature folder **MUST** include `_category_.json`:

```json
{
  "label": "{Feature}",
  "position": {N},
  "collapsed": false,
  "collapsible": true,
  "link": {
    "type": "doc",
    "id": "{feature}"
  }
}
```

## Content Placement Guide

Use this table to determine where content belongs:

| Content Type | Correct Page | Never On |
|--------------|--------------|----------|
| "How do I mock X?" | `testing.md` | Entry, topic pages |
| "What options does X support?" | `configuration.md` | Internals |
| "Show me a complete project" | `samples.md` | Entry (brief examples OK) |
| "What interfaces are available?" | `public-apis.md` | Internals |
| "What's the recommended pattern?" | `best-practices.md` | Entry |
| "Why am I getting error Y?" | `troubleshooting.md` | Any other page |
| "How does X work internally?" | `internals.md` | Entry, topic pages |
| "How do I upgrade from v1 to v2?" | `migration/v1-to-v2.md` | Any other page |

## Core Principles

- **One Entry Point**: The feature folder is clickable and lands on the combined intro/getting-started page.
- **Strict Segregation**: Content lives on exactly one page type; no mixing.
- **Progressive Disclosure**: Entry → Topics → Config → Testing → APIs → Best Practices → Troubleshooting → Internals.
- **Predictable Names**: Same filenames across all features.

## Example: Brooks Feature

```
docs/event-sourcing/brooks/
├── _category_.json           # label: "Brooks", link to "brooks"
├── brooks.md                 # Entry: intro, concepts, getting started
├── brook-keys.md             # Topic: key structure and naming
├── brook-events.md           # Topic: event envelope format
├── reading-and-writing.md    # Topic: grain operations
├── storage-providers.md      # Topic: storage abstraction
├── configuration.md          # Options: provider settings, connection strings
├── testing.md                # Testing: mocking IBrookGrainFactory
├── samples.md                # Samples: links to Spring/LightSpeed usage
├── public-apis.md            # APIs: all Brook interfaces and types
├── best-practices.md         # Patterns: batching, cursor management
├── troubleshooting.md        # Errors: common issues and fixes
├── internals.md              # Internals: grain activation, storage mechanics
└── migration/
    └── v1-to-v2.md           # Breaking changes from v1 to v2
```

## References

- Documentation authoring: `.github/instructions/documentation-authoring.instructions.md`
- Page focus rules: `.github/instructions/documentation-page-focus.instructions.md`
- Documentation guide: `docs/Docusaurus/docs/contributing/documentation-guide.md`
