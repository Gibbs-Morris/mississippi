---
description: C# General Development Best Practices
globs: ["**/*.cs"]
alwaysApply: false
---
# C# General Development Best Practices
**Source:** .github/instructions/csharp.instructions.md


# C# General Development Best Practices

Governing thought: Keep C# code SOLID, testable, option-driven, and Orleans-safe.

## Rules (RFC 2119)

- Design **MUST** follow SOLID with unit-testable seams (DI, pure logic, no hidden state). Analyzer/StyleCop warnings **MUST** block the build; third-party dependencies **MAY** be added only with explicit approval or when extending an existing stack.
- Injected dependencies **MUST** use `private Type Name { get; }` get-only properties; constructors **MUST NOT** accept raw configuration (use `IOptions*`). Blocking calls and shared mutable state **MUST** be avoided.
- Orleans code **MUST** use POCO grains implementing `IGrainBase`, prefer sealed classes, and scope grain interfaces public only when externally consumed. `Parallel.ForEach` **MUST NOT** be used; prefer async/await plus `Task.WhenAll`.
- Public/protected or unsealed classes **MUST** include XML justification. Prefer least privilege: keep members/internal types private unless intentionally part of the API; allow inheritance only with clear, documented need.
- Authors **SHOULD** default to records/init-only for domain models/contracts, build cloud-native stateless designs, and align with Microsoft guidance.

## Scope and Audience

All C# contributors across Mississippi code and samples.

## Quick Start

- Start with SOLID design and DI seams; keep functions side-effect light and testable.
- Use the Options pattern, treat warnings as errors, and avoid raw configuration in constructors.
- Use async/await + `Task.WhenAll` for concurrency; avoid shared mutable state.
- Follow POCO grain + access-control guidance for Orleans code.

## Review Checklist

- [ ] SOLID/testability maintained; analyzers clean; dependencies approved.
- [ ] DI property pattern used; no raw configuration; async patterns correct.
- [ ] Orleans grains are POCO, sealed, using async; no `Parallel.ForEach`.
- [ ] Access control justified; XML docs on public/protected/unsealed types.
- [ ] Records/init-only and least-privilege applied when reasonable.
