---
description: Project File Management
alwaysApply: true
---
# Project File Management
**Source:** .github/instructions/projects.instructions.md


# Project File Management

Governing thought: Keep `.csproj` files minimal, CPM-driven, and free of duplicated settings from `Directory.Build.props`.

> Drift check: Open `Directory.Build.props` and `Directory.Packages.props` before editing a project file; they define defaults and versions.

## Rules (RFC 2119)

- Project files **MUST** avoid duplicating settings from `Directory.Build.props` and **MUST** use Central Package Management; `PackageReference` items **MUST NOT** include `Version`. Why: Single source of truth and no NU10xx noise.
- Package versions **MUST** stay in `Directory.Packages.props`; agents **MUST** remove any `Version` attributes they encounter. Why: Prevents drift.
- Clean builds with zero warnings **MUST** validate project changes. Why: Aligns with quality gates.
- Automatic assembly/root namespace naming **MUST NOT** be overridden without justification. Why: Keeps naming consistent.
- The correct SDK (`Microsoft.NET.Sdk` / `.Web`, etc.) **SHOULD** be chosen for the project type; only project-specific properties **SHOULD** appear in the file. Why: Minimizes file size and confusion.

## Scope and Audience

Anyone creating or modifying `.csproj` files.

## At-a-Glance Quick-Start

- Use `<PackageReference Include="X" />` (no versions); add/remove via `dotnet add/remove package`.
- Keep only project-specific properties (`OutputType`, `GeneratePackageOnBuild`, etc.).
- Build to validate: `pwsh ./eng/src/agent-scripts/build-mississippi-solution.ps1` (or Samples equivalent) or `pwsh ./eng/src/agent-scripts/final-build-solutions.ps1`.

## Core Principles

- Minimize duplication; inherit shared settings.
- Centralize package versions; keep warnings at zero.

## References

- Shared guardrails: `.github/instructions/shared-policies.instructions.md`
