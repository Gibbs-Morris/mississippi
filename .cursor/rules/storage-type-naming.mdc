---
description: Storage Type Naming with Attributes
globs: ["**/*.cs"]
alwaysApply: false
---
# Storage Type Naming with Attributes
**Source:** .github/instructions/storage-type-naming.instructions.md


# Storage Type Naming with Attributes

Governing thought: Persisted types carry stable, versioned attribute names (`APP.MODULE.NAME.Vn`) so code can be refactored without breaking stored data.

> Drift check: Ensure registries/serialization code you reference is current before changing attributes or registries.

## Rules (RFC 2119)

- Persisted types (events/snapshots/commands, etc.) **MUST** have a naming attribute (e.g., `[EventName]`, `[SnapshotName]`) with an explicit `version` parameter. Why: Provides stable, versioned identities.
- The computed name **MUST** follow `APPNAME.MODULENAME.NAME.Vn`; app/module/name **MUST NOT** change once persisted; schema evolution **MUST** increment `version` instead. Why: Maintains compatibility.
- Each attribute value **MUST** be globally unique; registries (e.g., `IEventTypeRegistry`) **MUST** resolve names↔types; all persisted types **SHOULD** be registered at startup via scanning. Why: Enables deterministic resolution.
- Class/record names **MAY** be refactored freely when the attribute stays the same. Why: Decouples code identity from storage identity.
- When members are removed, developers **SHOULD** keep prior versions/types available for reads. Why: Supports backward compatibility.

## Scope and Audience

Developers creating or consuming persisted types in event-sourced/storage components.

## At-a-Glance Quick-Start

- Decorate types with `[EventName("ORDER","FULFILLMENT","SHIPPED", version: 1)]` (or appropriate attribute).
- Keep app/module/name stable; bump `version` for breaking changes.
- Use registries for name↔type resolution; scan assemblies at startup.

## Core Principles

- Storage identity is attribute-based; code identity can change.
- Explicit versioning makes evolution safe and auditable.

## References

- Orleans serialization: `.github/instructions/orleans-serialization.instructions.md`
