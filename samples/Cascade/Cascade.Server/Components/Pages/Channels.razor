@page "/channels"
@page "/channels/{ChannelId}"
@using Cascade.Server.Components.Organisms
@using Cascade.Server.Components.Shared

<PageTitle>Cascade Chat - Channels</PageTitle>

@if (!UserSession.IsAuthenticated)
{
    <div class="container mt-5">
        <div class="alert alert-warning">
            <h4>Not Logged In</h4>
            <p>You need to log in to access channels.</p>
            <a href="/login" class="btn btn-primary">Go to Login</a>
        </div>
    </div>
}
else
{
    <div class="chat-container d-flex">
        <ChannelList SelectedChannelId="@ChannelId" OnChannelSelected="HandleChannelSelected"/>

        <div class="channel-content flex-grow-1">
            @if (string.IsNullOrEmpty(ChannelId))
            {
                <div class="no-channel-selected">
                    <h2>Welcome, @UserSession.DisplayName!</h2>
                    <p>Select a channel from the sidebar or create a new one to get started.</p>
                </div>
            }
            else
            {
                <ChannelView
                    ChannelId="@ChannelId"
                    ChannelName="@ChannelDisplayHelper.GetDisplayName(ChannelId)"/>
            }
        </div>
    </div>
}