/*
 * Mississippi Refraction Base: Luminous
 *
 * Baseline document styles for the Luminous theme.
 * Covers all native HTML elements with futuristic, ethereal styling.
 * Glass surfaces, glow accents, generous spacing.
 *
 * Element selectors use :where() for zero specificity —
 * component classes always override without fighting.
 * Utility classes (.mis-*) stay at normal class specificity.
 *
 * Load order:
 *   1. refraction.tokens.luminous.css  (theme token contract + palette)
 *   2. refraction.luminous.base.css    (THIS FILE — document baseline)
 *   3. refraction.theme.luminous.css   (component styles)
 *   4. App overrides
 */

/* ════════════════════════════════════════════════════════════════════════════
   BOX MODEL RESET
   ════════════════════════════════════════════════════════════════════════════ */

:where(*, *::before, *::after) {
    box-sizing: border-box;
}

:where(*) {
    margin: 0;
    padding: 0;
}

/* ════════════════════════════════════════════════════════════════════════════
   DOCUMENT ROOT
   ════════════════════════════════════════════════════════════════════════════ */

:where(html) {
    -webkit-text-size-adjust: 100%;
    text-size-adjust: 100%;
    -moz-tab-size: 4;
    tab-size: 4;
    scroll-behavior: smooth;
}

body {
    font-family: var(--mis-font-body);
    font-size: clamp(var(--mis-type-ui-size), 0.84rem + 0.3vw, var(--mis-type-body-size));
    font-weight: var(--mis-type-body-weight);
    line-height: var(--mis-type-body-lh);
    color: var(--mis-text-default);
    background-color: var(--mis-bg-default);
    background-image:
        radial-gradient(120rem 80rem at 50% -20%, color-mix(in srgb, var(--mis-bg-brand) 12%, transparent), transparent 58%),
        radial-gradient(90rem 70rem at 120% 120%, color-mix(in srgb, var(--mis-bg-accent) 10%, transparent), transparent 60%);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

/* ════════════════════════════════════════════════════════════════════════════
   SCROLLBARS
   Custom styled scrollbars matching futuristic aesthetic — subtle glow on hover
   ════════════════════════════════════════════════════════════════════════════ */

/* Firefox */
:where(*) {
    scrollbar-width: thin;
    scrollbar-color: var(--mis-scrollbar-thumb) var(--mis-scrollbar-track);
}

/* Webkit (Chrome, Safari, Edge) */
:where(::-webkit-scrollbar) {
    width: var(--mis-scrollbar-width);
    height: var(--mis-scrollbar-width);
}

:where(::-webkit-scrollbar-track) {
    background: var(--mis-scrollbar-track);
    border-radius: var(--mis-radius-sm);
}

:where(::-webkit-scrollbar-thumb) {
    background: var(--mis-scrollbar-thumb);
    border-radius: var(--mis-radius-sm);
    border: 2px solid var(--mis-scrollbar-track);
    transition: background var(--mis-duration-fast) var(--mis-ease-out),
                box-shadow var(--mis-duration-fast) var(--mis-ease-out);
}

:where(::-webkit-scrollbar-thumb:hover) {
    background: var(--mis-scrollbar-thumb-hover);
    box-shadow: 0 0 8px -2px var(--mis-bg-brand);
}

:where(::-webkit-scrollbar-corner) {
    background: var(--mis-scrollbar-track);
}

/* ════════════════════════════════════════════════════════════════════════════
   LAYOUT PRIMITIVES
   ════════════════════════════════════════════════════════════════════════════ */

:where(main, header, footer, nav, section, article, aside) {
    display: block;
}

:where(article) {
    max-width: clamp(48ch, 72vw, 75ch);
}

/* ════════════════════════════════════════════════════════════════════════════
   HEADINGS
   Rajdhani heading font, wide tracking, generous vertical rhythm
   ════════════════════════════════════════════════════════════════════════════ */

:where(h1, h2, h3, h4, h5, h6) {
    font-family: var(--mis-font-heading);
    color: var(--mis-text-default);
    text-wrap: balance;
}

:where(h1) {
    font-size: clamp(var(--mis-type-h2-size), 1.2rem + 1.9vw, var(--mis-type-display-size));
    font-weight: var(--mis-type-h1-weight);
    line-height: var(--mis-type-h1-lh);
    letter-spacing: var(--mis-tracking-wide);
    margin-block-end: var(--mis-space-md);
}

:where(h2) {
    font-size: clamp(var(--mis-type-h3-size), 1.02rem + 1.2vw, var(--mis-type-h2-size));
    font-weight: var(--mis-type-h2-weight);
    line-height: var(--mis-type-h2-lh);
    letter-spacing: var(--mis-tracking-tight);
    margin-block-start: var(--mis-space-xl);
    margin-block-end: var(--mis-space-sm);
}

:where(h3) {
    font-size: clamp(var(--mis-type-body-lg-size), 0.94rem + 0.8vw, var(--mis-type-h3-size));
    font-weight: var(--mis-type-h3-weight);
    line-height: var(--mis-type-h3-lh);
    letter-spacing: var(--mis-tracking-tight);
    margin-block-start: var(--mis-space-lg);
    margin-block-end: var(--mis-space-sm);
}

:where(h4) {
    font-size: var(--mis-type-body-lg-size);
    font-weight: var(--mis-font-weight-semibold);
    line-height: var(--mis-type-body-lg-lh);
    margin-block-start: var(--mis-space-lg);
    margin-block-end: var(--mis-space-xs);
}

:where(h5) {
    font-size: var(--mis-type-body-size);
    font-weight: var(--mis-font-weight-semibold);
    line-height: var(--mis-type-body-lh);
    margin-block-start: var(--mis-space-md);
    margin-block-end: var(--mis-space-xs);
}

:where(h6) {
    font-size: var(--mis-type-ui-size);
    font-weight: var(--mis-font-weight-semibold);
    line-height: var(--mis-type-ui-lh);
    text-transform: uppercase;
    letter-spacing: var(--mis-tracking-wide);
    color: var(--mis-text-muted);
    margin-block-start: var(--mis-space-md);
    margin-block-end: var(--mis-space-xs);
}

/* ════════════════════════════════════════════════════════════════════════════
   PARAGRAPHS & INLINE TEXT
   ════════════════════════════════════════════════════════════════════════════ */

:where(p) {
    margin-block-end: var(--mis-space-md);
    text-wrap: pretty;
}

:where(strong, b) {
    font-weight: var(--mis-font-weight-bold);
}

:where(em, i) {
    font-style: italic;
}

:where(small) {
    font-size: var(--mis-type-caption-size);
    line-height: var(--mis-type-caption-lh);
}

:where(mark) {
    background: color-mix(in srgb, var(--mis-bg-accent) 30%, transparent);
    color: inherit;
    padding-inline: 0.125em;
    border-radius: var(--mis-radius-sm);
}

:where(abbr[title]) {
    text-decoration: underline dotted;
    text-underline-offset: 0.15em;
    cursor: help;
}

:where(sub, sup) {
    font-size: 0.75em;
    line-height: 0;
    position: relative;
    vertical-align: baseline;
}

:where(sub) { bottom: -0.25em; }
:where(sup) { top: -0.5em; }

:where(del) {
    text-decoration: line-through;
    color: var(--mis-text-muted);
}

:where(ins) {
    text-decoration: underline;
    text-decoration-color: var(--mis-text-success);
    text-underline-offset: 0.15em;
}

/* ════════════════════════════════════════════════════════════════════════════
   LINKS
   Underline by default (accessibility); glow on hover (Luminous accent)
   ════════════════════════════════════════════════════════════════════════════ */

:where(a) {
    color: var(--mis-text-brand);
    text-decoration: underline;
    text-decoration-thickness: 1px;
    text-underline-offset: 0.15em;
    text-decoration-color: color-mix(in srgb, var(--mis-text-brand) 40%, transparent);
    transition:
        color var(--mis-duration-fast) var(--mis-ease-out),
        text-decoration-color var(--mis-duration-fast) var(--mis-ease-out),
        text-shadow var(--mis-duration-fast) var(--mis-ease-out);
}

:where(a:hover) {
    text-decoration-color: var(--mis-text-brand);
    text-shadow: 0 0 5px color-mix(in srgb, var(--mis-text-brand) 22%, transparent);
}

:where(a:visited) {
    color: color-mix(in srgb, var(--mis-text-brand) 80%, var(--mis-text-muted));
}

:where(a:active) {
    opacity: 0.85;
}

:where(a:focus-visible) {
    outline: var(--mis-focus-ring-width) solid var(--mis-border-focus);
    outline-offset: var(--mis-focus-ring-offset);
    border-radius: var(--mis-radius-sm);
    text-decoration: none;
}

/* ════════════════════════════════════════════════════════════════════════════
   HORIZONTAL RULE
   Luminous: subtle glow line
   ════════════════════════════════════════════════════════════════════════════ */

:where(hr) {
    border: none;
    height: 1px;
    background: var(--mis-border-decorative);
    margin-block: var(--mis-space-xl);
    box-shadow: none;
}

/* ════════════════════════════════════════════════════════════════════════════
   BLOCKQUOTE
   Luminous: glass surface with accent border
   ════════════════════════════════════════════════════════════════════════════ */

:where(blockquote) {
    margin-block: var(--mis-space-md);
    margin-inline: 0;
    padding: var(--mis-space-md) var(--mis-space-lg);
    border-inline-start: 3px solid var(--mis-border-focus);
    background: color-mix(in srgb, var(--mis-bg-elevated) 78%, transparent);
    border-radius: 0 var(--mis-radius-md) var(--mis-radius-md) 0;
    color: var(--mis-text-muted);
    font-style: italic;
    backdrop-filter: blur(8px);
}

:where(blockquote > :last-child) {
    margin-block-end: 0;
}

/* ════════════════════════════════════════════════════════════════════════════
   CODE, KBD, SAMP, PRE
   JetBrains Mono with glass code surfaces
   ════════════════════════════════════════════════════════════════════════════ */

:where(code, kbd, samp) {
    font-family: var(--mis-font-mono);
    font-size: var(--mis-type-code-size);
    font-weight: var(--mis-type-code-weight);
    line-height: var(--mis-type-code-lh);
}

:where(code:not(pre code)) {
    padding: 0.125em 0.375em;
    background: var(--mis-bg-muted);
    border-radius: var(--mis-radius-sm);
    color: var(--mis-text-brand);
}

:where(kbd) {
    padding: 0.125em 0.375em;
    background: var(--mis-bg-elevated);
    border: 1px solid var(--mis-border-default);
    border-radius: var(--mis-radius-sm);
    box-shadow: inset 0 -1px 0 var(--mis-border-decorative);
    font-size: 0.875em;
}

:where(pre) {
    font-family: var(--mis-font-mono);
    font-size: var(--mis-type-code-size);
    font-weight: var(--mis-type-code-weight);
    line-height: var(--mis-type-code-lh);
    margin-block: var(--mis-space-md);
    padding: var(--mis-space-md);
    background: color-mix(in srgb, var(--mis-bg-elevated) 88%, var(--mis-bg-muted));
    border: 1px solid color-mix(in srgb, var(--mis-border-decorative) 40%, transparent);
    border-radius: var(--mis-radius-md);
    overflow-x: auto;
    color: var(--mis-text-default);
    tab-size: 4;
    backdrop-filter: blur(4px);
}

:where(pre code) {
    padding: 0;
    background: none;
    border-radius: 0;
    color: inherit;
    font-size: inherit;
}

/* ════════════════════════════════════════════════════════════════════════════
   LISTS
   ════════════════════════════════════════════════════════════════════════════ */

:where(ul, ol) {
    margin-block: var(--mis-space-sm);
    padding-inline-start: var(--mis-space-lg);
}

:where(li) {
    margin-block-end: var(--mis-space-xs);
}

:where(li::marker) {
    color: var(--mis-text-brand);
}

:where(ul ul, ul ol, ol ul, ol ol) {
    margin-block: var(--mis-space-xs);
}

:where(dl) {
    margin-block: var(--mis-space-md);
}

:where(dt) {
    font-weight: var(--mis-font-weight-semibold);
    color: var(--mis-text-default);
    margin-block-start: var(--mis-space-sm);
}

:where(dd) {
    margin-inline-start: var(--mis-space-lg);
    color: var(--mis-text-muted);
}

/* ════════════════════════════════════════════════════════════════════════════
   TABLES
   Luminous: translucent hover rows, glow-styled header
   ════════════════════════════════════════════════════════════════════════════ */

:where(table) {
    width: 100%;
    border-collapse: collapse;
    border-spacing: 0;
    margin-block: var(--mis-space-md);
    font-size: var(--mis-type-ui-size);
    line-height: var(--mis-type-ui-lh);
}

:where(caption) {
    padding-block-end: var(--mis-space-sm);
    font-size: var(--mis-type-caption-size);
    color: var(--mis-text-muted);
    text-align: start;
    caption-side: top;
}

:where(thead) {
    border-block-end: 2px solid var(--mis-border-default);
}

:where(th) {
    padding: var(--mis-space-sm) var(--mis-space-md);
    font-weight: var(--mis-font-weight-semibold);
    text-align: start;
    color: var(--mis-text-default);
    letter-spacing: var(--mis-tracking-wide);
    font-size: var(--mis-type-caption-size);
    text-transform: uppercase;
}

:where(td) {
    padding: var(--mis-space-sm) var(--mis-space-md);
    border-block-end: 1px solid var(--mis-border-decorative);
    color: var(--mis-text-default);
}

:where(tbody tr:hover) {
    background: color-mix(in srgb, var(--mis-bg-elevated) 50%, transparent);
}

:where(tfoot) {
    border-block-start: 2px solid var(--mis-border-default);
}

:where(tfoot td) {
    font-weight: var(--mis-font-weight-semibold);
}

/* ════════════════════════════════════════════════════════════════════════════
   MEDIA & FIGURES
   ════════════════════════════════════════════════════════════════════════════ */

:where(img, picture, video, canvas, svg) {
    display: block;
    max-width: 100%;
    height: auto;
}

:where(figure) {
    margin-block: var(--mis-space-md);
    margin-inline: 0;
}

:where(figcaption) {
    margin-block-start: var(--mis-space-sm);
    font-size: var(--mis-type-caption-size);
    line-height: var(--mis-type-caption-lh);
    color: var(--mis-text-muted);
    text-align: center;
}

:where(audio) {
    display: block;
    width: 100%;
    margin-block: var(--mis-space-sm);
}

/* ════════════════════════════════════════════════════════════════════════════
   DISCLOSURE (DETAILS / SUMMARY)
   Luminous: glass container with animated indicator
   ════════════════════════════════════════════════════════════════════════════ */

:where(details) {
    margin-block: var(--mis-space-sm);
    padding: var(--mis-space-sm) var(--mis-space-md);
    border: 1px solid var(--mis-border-decorative);
    border-radius: var(--mis-radius-md);
    background: color-mix(in srgb, var(--mis-bg-elevated) 72%, transparent);
    backdrop-filter: blur(4px);
}

:where(details[open]) {
    padding-block-end: var(--mis-space-md);
}

:where(summary) {
    cursor: pointer;
    font-weight: var(--mis-font-weight-medium);
    color: var(--mis-text-default);
    padding: var(--mis-space-xs);
    border-radius: var(--mis-radius-sm);
    list-style: none;
    display: flex;
    align-items: center;
    gap: var(--mis-space-sm);
    transition: color var(--mis-duration-fast) var(--mis-ease-out);
}

:where(summary:hover) {
    color: var(--mis-text-brand);
}

:where(summary:focus-visible) {
    outline: var(--mis-focus-ring-width) solid var(--mis-border-focus);
    outline-offset: var(--mis-focus-ring-offset);
}

:where(summary::before) {
    content: "▸";
    display: inline-block;
    transition: transform var(--mis-duration-fast) var(--mis-ease-out);
    font-size: 0.75em;
}

:where(details[open] > summary::before) {
    transform: rotate(90deg);
}

:where(summary::-webkit-details-marker) {
    display: none;
}

:where(details > :not(summary)) {
    margin-block-start: var(--mis-space-sm);
}

/* ════════════════════════════════════════════════════════════════════════════
   FORM ELEMENTS (baseline only — component classes override)
   ════════════════════════════════════════════════════════════════════════════ */

:where(fieldset) {
    margin-block: var(--mis-space-md);
    padding: var(--mis-space-md);
    border: 1px solid var(--mis-border-default);
    border-radius: var(--mis-radius-md);
}

:where(legend) {
    padding-inline: var(--mis-space-sm);
    font-weight: var(--mis-font-weight-semibold);
    font-size: var(--mis-type-ui-size);
    color: var(--mis-text-default);
}

:where(label) {
    display: block;
    font-size: var(--mis-type-ui-size);
    font-weight: var(--mis-font-weight-medium);
    color: var(--mis-text-default);
    margin-block-end: var(--mis-space-xs);
}

:where(input, textarea, select) {
    font-family: inherit;
    font-size: inherit;
    line-height: inherit;
    color: inherit;
}

:where(button) {
    font-family: inherit;
    font-size: inherit;
    cursor: pointer;
    border: none;
    background: none;
    color: inherit;
}

:where(input:focus-visible, textarea:focus-visible, select:focus-visible, button:focus-visible) {
    outline: var(--mis-focus-ring-width) solid var(--mis-border-focus);
    outline-offset: var(--mis-focus-ring-offset);
}

/* ════════════════════════════════════════════════════════════════════════════
   TYPOGRAPHY UTILITY CLASSES
   Normal class specificity — intentional opt-in overrides
   ════════════════════════════════════════════════════════════════════════════ */

.mis-display {
    font-family: var(--mis-font-heading);
    font-size: var(--mis-type-display-size);
    font-weight: var(--mis-type-display-weight);
    line-height: var(--mis-type-display-lh);
    letter-spacing: var(--mis-tracking-wide);
    color: var(--mis-text-default);
}

.mis-h1 {
    font-family: var(--mis-font-heading);
    font-size: var(--mis-type-h1-size);
    font-weight: var(--mis-type-h1-weight);
    line-height: var(--mis-type-h1-lh);
    letter-spacing: var(--mis-tracking-wide);
}

.mis-h2 {
    font-family: var(--mis-font-heading);
    font-size: var(--mis-type-h2-size);
    font-weight: var(--mis-type-h2-weight);
    line-height: var(--mis-type-h2-lh);
    letter-spacing: var(--mis-tracking-tight);
}

.mis-h3 {
    font-family: var(--mis-font-heading);
    font-size: var(--mis-type-h3-size);
    font-weight: var(--mis-type-h3-weight);
    line-height: var(--mis-type-h3-lh);
    letter-spacing: var(--mis-tracking-tight);
}

.mis-body-lg {
    font-family: var(--mis-font-body);
    font-size: var(--mis-type-body-lg-size);
    font-weight: var(--mis-type-body-lg-weight);
    line-height: var(--mis-type-body-lg-lh);
}

.mis-body {
    font-family: var(--mis-font-body);
    font-size: var(--mis-type-body-size);
    font-weight: var(--mis-type-body-weight);
    line-height: var(--mis-type-body-lh);
}

.mis-ui {
    font-family: var(--mis-font-body);
    font-size: var(--mis-type-ui-size);
    font-weight: var(--mis-type-ui-weight);
    line-height: var(--mis-type-ui-lh);
}

.mis-caption {
    font-family: var(--mis-font-body);
    font-size: var(--mis-type-caption-size);
    font-weight: var(--mis-type-caption-weight);
    line-height: var(--mis-type-caption-lh);
}

.mis-code {
    font-family: var(--mis-font-mono);
    font-size: var(--mis-type-code-size);
    font-weight: var(--mis-type-code-weight);
    line-height: var(--mis-type-code-lh);
}

.mis-code-sm {
    font-family: var(--mis-font-mono);
    font-size: var(--mis-type-code-sm-size);
    font-weight: var(--mis-type-code-sm-weight);
    line-height: var(--mis-type-code-sm-lh);
}

/* ════════════════════════════════════════════════════════════════════════════
   ACCESSIBILITY — REDUCED MOTION
   ════════════════════════════════════════════════════════════════════════════ */

@media (prefers-reduced-motion: reduce) {
    :where(*, *::before, *::after) {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
        scroll-behavior: auto !important;
    }
}

/* ════════════════════════════════════════════════════════════════════════════
   ACCESSIBILITY — REDUCED TRANSPARENCY (Luminous-specific)
   Swaps glass surfaces to opaque when transparency is problematic
   ════════════════════════════════════════════════════════════════════════════ */

/* Note: prefers-reduced-transparency is not universally supported yet. */
@media (prefers-reduced-transparency: reduce) {
    :where(blockquote),
    :where(pre),
    :where(details) {
        backdrop-filter: none;
        background: var(--mis-bg-muted);
    }
}

/* Attribute hook — manual toggle for apps */
[data-reduce-transparency] :where(blockquote),
[data-reduce-transparency] :where(pre),
[data-reduce-transparency] :where(details) {
    backdrop-filter: none;
    background: var(--mis-bg-muted);
}

/* ════════════════════════════════════════════════════════════════════════════
   ACCESSIBILITY — HIGH CONTRAST ENHANCEMENTS
   ════════════════════════════════════════════════════════════════════════════ */

@media (prefers-contrast: more) {
    :where(a) {
        text-decoration-thickness: 2px;
    }

    :where(hr) {
        height: 2px;
        box-shadow: none;
    }

    :where(th, td) {
        border: 1px solid var(--mis-border-default);
    }
}
